<?xml version="1.0" encoding="UTF-8"?>
<foxml:digitalObject xmlns:foxml="info:fedora/fedora-system:def/foxml#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PID="islandora-dm:po-collection" VERSION="1.1" xsi:schemaLocation="info:fedora/fedora-system:def/foxml# http://www.fedora.info/definitions/1/0/foxml1-1.xsd">
  <foxml:objectProperties>
    <foxml:property NAME="info:fedora/fedora-system:def/model#state" VALUE="Active"/>
    <foxml:property NAME="info:fedora/fedora-system:def/model#label" VALUE="Purchase Order Collection"/>
    <foxml:property NAME="info:fedora/fedora-system:def/model#ownerId" VALUE="fedoraAdmin"/>
    <foxml:property NAME="info:fedora/fedora-system:def/model#createdDate" VALUE="2010-06-01T00:00:00.000Z"/>
    <foxml:property NAME="info:fedora/fedora-system:def/view#lastModifiedDate" VALUE="2010-06-01T00:00:00.000Z"/>
  </foxml:objectProperties>
  <foxml:datastream CONTROL_GROUP="X" ID="DC" STATE="A" VERSIONABLE="false">
    <foxml:datastreamVersion FORMAT_URI="http://www.openarchives.org/OAI/2.0/oai_dc/" ID="DC1.0" LABEL="Dublin Core Record for this object" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <oai_dc:dc xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd">
          <dc:title>Purchase Order Collection</dc:title>
          <dc:identifier>islandora-dm:po-collection</dc:identifier>
        </oai_dc:dc>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="RELS-EXT" STATE="A" VERSIONABLE="false">
    <foxml:datastreamVersion FORMAT_URI="info:fedora/fedora-system:FedoraRELSExt-1.0" ID="RELS-EXT.0" LABEL="RDF Statements about this object" MIMETYPE="application/rdf+xml">
      <foxml:xmlContent>
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
          <rdf:Description rdf:about="info:fedora/islandora-dm:po-collection">
            <hasModel xmlns="info:fedora/fedora-system:def/model#" rdf:resource="info:fedora/islandora-dm:po-collection-cmodel"/>
          </rdf:Description>
        </rdf:RDF>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="defaultPOLICY" STATE="A" VERSIONABLE="false">
    <foxml:datastreamVersion ID="dm.0" LABEL="default policy xacml" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <Policy xmlns="urn:oasis:names:tc:xacml:1.0:policy" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PolicyId="islandora-dm-po-collection-defaultPOLICY" RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable">
          <Description>default xacml policy for objects in this collection</Description>
          <Target>
            <Subjects>
              <AnySubject/>
            </Subjects>
            <Resources>
              <AnyResource/>
            </Resources>
            <Actions>
              <AnyAction/>
            </Actions>
          </Target>

          <!-- limit api-m to admin, edit roles and fedoraAdmin user -->
          <Rule RuleId="1" Effect="Deny">
            <Target>
              <Subjects>
                <AnySubject/>
              </Subjects>
              <Resources>
                <AnyResource/>
              </Resources>
              <Actions>
                <Action>
                  <ActionMatch MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">urn:fedora:names:fedora:2.1:action:api-m</AttributeValue>
                    <ActionAttributeDesignator DataType="http://www.w3.org/2001/XMLSchema#string" AttributeId="urn:fedora:names:fedora:2.1:action:api"/>
                  </ActionMatch>
                </Action>
              </Actions>
            </Target>
            <Condition FunctionId="urn:oasis:names:tc:xacml:1.0:function:not">
              <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:or">
                <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-at-least-one-member-of">
                  <SubjectAttributeDesignator AttributeId="fedoraRole" DataType="http://www.w3.org/2001/XMLSchema#string" MustBePresent="false"/>
                  <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-bag">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">islandora_dm_po_admin</AttributeValue>
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">islandora_dm_po_edit</AttributeValue>
                  </Apply>
                </Apply>
                <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-at-least-one-member-of">
                  <SubjectAttributeDesignator AttributeId="urn:fedora:names:fedora:2.1:subject:loginId" MustBePresent="false" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-bag">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">fedoraAdmin</AttributeValue>
                  </Apply>
                </Apply>
              </Apply>
            </Condition>
          </Rule>
          
          <!-- limit api-a to admin, edit, view roles and fedoraAdmin user -->
          <Rule RuleId="2" Effect="Deny">
            <Target>
              <Subjects>
                <AnySubject/>
              </Subjects>
              <Resources>
                <AnyResource/>
              </Resources>
              <Actions>
                <Action>
                  <ActionMatch MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">urn:fedora:names:fedora:2.1:action:api-a</AttributeValue>
                    <ActionAttributeDesignator DataType="http://www.w3.org/2001/XMLSchema#string" AttributeId="urn:fedora:names:fedora:2.1:action:api"/>
                  </ActionMatch>
                </Action>
              </Actions>
            </Target>
            <Condition FunctionId="urn:oasis:names:tc:xacml:1.0:function:not">
              <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:or">
                <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-at-least-one-member-of">
                  <SubjectAttributeDesignator AttributeId="fedoraRole" DataType="http://www.w3.org/2001/XMLSchema#string" MustBePresent="false"/>
                  <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-bag">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">islandora_dm_po_admin</AttributeValue>
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">islandora_dm_po_edit</AttributeValue>
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">islandora_dm_po_view</AttributeValue>
                  </Apply>
                </Apply>
                <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-at-least-one-member-of">
                  <SubjectAttributeDesignator AttributeId="urn:fedora:names:fedora:2.1:subject:loginId" MustBePresent="false" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-bag">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">fedoraAdmin</AttributeValue>
                  </Apply>
                </Apply>
              </Apply>
            </Condition>
          </Rule>
          
          <!-- allow other access -->
          <Rule RuleId="allow" Effect="Permit"/>
        </Policy>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="defaultClassification" STATE="A" VERSIONABLE="false">
    <foxml:datastreamVersion ID="defaultClassification.0" LABEL="default classification metadata" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <classification>
          <officeOfRecord>Finance</officeOfRecord>
          <unitOfRecord>Accounts Payable</unitOfRecord>
          <depositorOfRecord></depositorOfRecord>
          <dateOfDeposit></dateOfDeposit>
          <classificationCode>code</classificationCode>
        </classification>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="defaultDisposition" STATE="A" VERSIONABLE="false">
    <foxml:datastreamVersion ID="defaultDisposition.0" LABEL="default disposition metadata" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <disposition>
          <dispositionAction>Archive</dispositionAction>
          <retentionPeriod>120</retentionPeriod>
          <dispositionDate></dispositionDate>
          <dispositionReason>Required by legislation</dispositionReason>
          <dispositionDecisionUser>user</dispositionDecisionUser>
        </disposition>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
</foxml:digitalObject>
